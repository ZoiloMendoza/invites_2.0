<div class="flex">
  <mat-drawer-container autosize>
    <mat-drawer class="w-[400px] p-6" #drawer mode="side">
      <div class="flex flex-col w-[250px]">
        @for (props of propEditorConfig(); track props) {
          @if (props.type === 'text') {
            <mat-form-field class="">
              <mat-label>{{ props.name }}</mat-label>
              <input matInput value="{{ props.value }}" (keyup)="onInputUpdate($event, props.name, props.key)">
            </mat-form-field> 
          }
          @if (props.type === 'image') {
            <p>{{ props.name }}</p>
            <input type="file" class="file-upload" (change)="handleImageUpload($event, props.name, props.key)">
          }
        }

        <button mat-flat-button color="primary" (click)="saveComponentConfig()">Edit</button>
      </div>
    </mat-drawer>
  </mat-drawer-container>
  
  <div class="w-full">
    <div class="mx-8" id="component-droper" cdkDropList [cdkDropListData]="pickedComponents()"
      (cdkDropListDropped)="componentDropped($event)">
      @for (component of pickedComponents(); track component) {
      <div cdkDrag [cdkDragData]="component" class="border-2 border-black border-dotted my-4 h-full">
        <div class="flex justify-between mx-10 my-4">
          <p class="text-2xl">{{ component.name }}</p>
          <button mat-flat-button color="primary" (click)="openDrawer(component.key)">Edit</button>
        </div>
        <ng-container *ngComponentOutlet="component.component;  inputs: component.config;"/>
      </div>
      }
    </div>
  </div>  
</div>